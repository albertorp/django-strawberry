{% extends "strawberry/base_strawberry.html" %}
{% load i18n %}

{% block app %}
<section class="bg-white p-6 rounded-lg shadow-sm">
<h1 class="text-lg font-bold text-gray-800 mb-4">
  {% if object %}Edit {{object_verbose_name}}{% else %}Create {{object_verbose_name}}{% endif %}
</h1>

<div>
  <form method="POST" {% if form.is_multipart %}enctype="multipart/form-data"{% endif %}
    action="{% if object %}{{ update_view_url }}{% else %}{{ create_view_url }}{% endif %}" 
    class="space-y-6">
    {% csrf_token %}

    <!-- Non-field errors -->
    {% if form.non_field_errors %}
    <div class="flex p-4 mb-4 text-red-800 border border-red-300 rounded-lg bg-red-50" role="alert">
      <svg class="flex-shrink-0 w-5 h-5 mr-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" 
           fill="currentColor" viewBox="0 0 20 20">
        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm1 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-1-3a1 1 0 0 1-1-1V6a1 1 0 0 1 2 0v4a1 1 0 0 1-1 1Z"/>
      </svg>
      <div class="text-sm">
        {% for error in form.non_field_errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- Fields -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% for field in form %}
      <div class="w-full">
        <label class="block mb-2 text-sm font-medium text-gray-700">
          {{ field.label }}
          {% if field.field.required %}
            <span class="text-red-600">*</span>
          {% endif %}
        </label>

        <!-- Field input -->
        {{ field }}

        <!-- Help text -->
        {% if field.help_text %}
        <p class="mt-1 text-xs text-gray-500">{{ field.help_text }}</p>
        {% endif %}

        <!-- Field errors -->
        {% if field.errors %}
        <p class="mt-1 text-xs text-red-600">
          {{ field.errors|join:", " }}
        </p>
        {% endif %}
      </div>
      {% endfor %}
    </div>

    <!-- Next parameter -->
    {% if request.GET.next %}
      <input type="hidden" name="next" value="{{ request.GET.next }}">
    {% endif %}

    <!-- Buttons -->
    <div class="flex items-center pt-2">
      <button type="submit" 
        class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 
               font-medium rounded-lg text-sm px-5 py-2.5 mr-3">
        {% trans 'Save' %}
      </button>

      <a href="{{ request.GET.next|default:list_view_url }}" 
         class="text-gray-700 bg-gray-100 hover:bg-gray-200 focus:ring-4 focus:ring-gray-300 
                font-medium rounded-lg text-sm px-5 py-2.5">
        {% trans 'Cancel' %}
      </a>
    </div>

  </form>
</div>
</section>
{% endblock %}